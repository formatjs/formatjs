!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("intl-messageformat-parser")):"function"==typeof define&&define.amd?define(["intl-messageformat-parser"],e):(t=t||self).IntlMessageFormat=e(t.parser)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var o,e=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=(r.prototype.compile=function(t){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(t)},r.prototype.compileMessage=function(t){var e=this;if(!t||"messageFormatPattern"!==t.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var r=t.elements,o=r.filter(function(t){return"messageTextElement"===t.type||"argumentElement"===t.type}).map(function(t){return"messageTextElement"===t.type?e.compileMessageText(t):e.compileArgument(t)});if(o.length!==r.length)throw new Error("Message element does not have a valid type");return o},r.prototype.compileMessageText=function(t){return this.currentPlural&&/(^|[^\\])#/g.test(t.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new m(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,t.value)):t.value.replace(/\\#/g,"#")},r.prototype.compileArgument=function(t){var e=t.format,r=t.id;if(!e)return new s(r);var o=this.formats,n=this.locales;switch(e.type){case"numberFormat":return{id:r,format:new Intl.NumberFormat(n,o.number[e.style]).format};case"dateFormat":return{id:r,format:new Intl.DateTimeFormat(n,o.date[e.style]).format};case"timeFormat":return{id:r,format:new Intl.DateTimeFormat(n,o.time[e.style]).format};case"pluralFormat":return new u(r,e.ordinal,e.offset,this.compileOptions(t),n);case"selectFormat":return new h(r,this.compileOptions(t));default:throw new Error("Message element does not have a valid format type")}},r.prototype.compileOptions=function(t){var e,r,o,n=t.format,a=n.options,i={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===n.type?t:null,e=0,r=a.length;e<r;e+=1)i[(o=a[e]).selector]=this.compileMessage(o.value);return this.currentPlural=this.pluralStack.pop(),i},r);function r(t,e){this.locales=[],this.formats={number:{},date:{},time:{}},this.pluralNumberFormat=null,this.currentPlural=null,this.pluralStack=[],this.locales=t,this.formats=e}function a(t){this.id=t}var i,s=(e(l,i=a),l.prototype.format=function(t){return t||"number"==typeof t?"string"==typeof t?t:String(t):""},l);function l(){return null!==i&&i.apply(this,arguments)||this}var u=(c.prototype.getOption=function(t){var e=this.options;return e["="+t]||e[this.pluralRules.select(t-this.offset)]||e.other},c);function c(t,e,r,o,n){this.id=t,this.offset=r,this.options=o,this.pluralRules=new Intl.PluralRules(n,{type:e?"ordinal":"cardinal"})}var p,m=(e(f,p=a),f.prototype.format=function(t){var e=this.numberFormat.format(t-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+e).replace(/\\#/g,"#")},f);function f(t,e,r,o){var n=p.call(this,t)||this;return n.offset=e,n.numberFormat=r,n.string=o,n}var h=(d.prototype.getOption=function(t){var e=this.options;return e[t]||e.other},d);function d(t,e){this.id=t,this.options=e}var y,g=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(){return(v=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},_=(w.__addLocaleData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){if(!t||!t.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");w.__localeData__[t.locale.toLowerCase()]=t})},w.prototype.resolvedOptions=function(){return{locale:this._locale}},w.prototype._resolveLocale=function(t){"string"==typeof t&&(t=[t]),t=(t||[]).concat(w.defaultLocale);var e,r,o,n,a=w.__localeData__;for(e=0,r=t.length;e<r;e+=1)for(o=t[e].toLowerCase().split("-");o.length;){if(n=a[o.join("-")])return n.locale;o.pop()}var i=t.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+t.join(", ")+", or the default locale: "+i)},w.prototype._compilePattern=function(t,e,r){return new n(e,r).compile(t)},w.prototype._format=function(t,e){var r,o,n,a,i,s="";for(r=0,o=t.length;r<o;r+=1)if("string"!=typeof(n=t[r])){if(a=n.id,!(e&&a in e))throw new F("A value must be provided for: "+a,a);i=e[a],n.options?s+=this._format(n.getOption(i),e):s+=n.format(i)}else s+=n;return s},w.defaultLocale="en",w.__localeData__={},w.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},w.__parse=t.parse,w);function w(t,e,r){var o=this;this.format=function(t){try{return o._format(o.pattern,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+o.message+"'"):t}};var n="string"==typeof t?w.__parse(t):t;if(!n||"messageFormatPattern"!==n.type)throw new TypeError("A message must be provided as a String or AST.");var a=function(t,e){return e?v({},t,{date:function(r,o){return o?v({},r||{},o||{},Object.keys(r).reduce(function(t,e){return t[e]=v({},r[e],o[e]||{}),t},{})):r}(t.date,e.date)}):t}(w.formats,r);this._locale=this._resolveLocale(e||[]),this.pattern=this._compilePattern(n,e||[],a),this.message=t}var b,F=(b=Error,g(O,b),O);function O(t,e){var r=b.call(this,t)||this;return r.variableId=e,r}return _.__addLocaleData({locale:"en"}),_.defaultLocale="en",_});
//# sourceMappingURL=intl-messageformat.min.js.map
