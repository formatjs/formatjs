actions:
  - name: 'Test all targets'
    container_image: 'ubuntu-20.04'
    triggers:
      push:
        branches:
          - 'main'
          - 'gh-readonly-queue/*'
    resource_requests:
      memory: 10GB
      disk: 16GB
    bazel_commands:
      - 'test //...'

  - name: 'Build rules_formatjs'
    container_image: 'ubuntu-20.04'
    triggers:
      push:
        branches:
          - 'main'
      pull_request:
        branches:
          - '*'
        paths:
          - 'rules_formatjs/**'
    bazel_workspace_dir: 'rules_formatjs'
    bazel_commands:
      - 'build //...'

  - name: 'Test rules_formatjs simple example'
    container_image: 'ubuntu-20.04'
    triggers:
      push:
        branches:
          - 'main'
      pull_request:
        branches:
          - '*'
        paths:
          - 'rules_formatjs/**'
    bazel_workspace_dir: 'rules_formatjs/examples/simple'
    bazel_commands:
      - 'test //...'

  - name: 'Test rules_formatjs aggregate example'
    container_image: 'ubuntu-20.04'
    triggers:
      push:
        branches:
          - 'main'
      pull_request:
        branches:
          - '*'
        paths:
          - 'rules_formatjs/**'
    bazel_workspace_dir: 'rules_formatjs/examples/aggregate'
    bazel_commands:
      - 'test //...'
